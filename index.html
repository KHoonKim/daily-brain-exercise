<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>매일매일 두뇌운동</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<meta property="og:image" content="https://littlesunnydays.com/appintos/brain-fit/icon-512.png">
<meta property="og:title" content="매일매일 두뇌운동">
<meta property="og:description" content="38가지 두뇌 훈련 게임으로 매일 두뇌를 운동하세요!">
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="stylesheet" href="src/styles/main.css?v=112">
</head>
<body>
<div class="app" id="app">

<div class="toast" id="toast"></div>
<div class="snackbar" id="snackbar"><div class="snackbar-inner" id="snackbar-inner"></div></div>

<!-- ===== HOME ===== -->
<div id="homeScreen" class="home screen active">
  <div class="home-header">
    <div class="header-left">
      <img src="icon-192.png" class="header-icon">
      <span class="header-title">두뇌운동</span>
    </div>
    <div class="home-header-r">
      <div id="ticketCount" class="ticket-badge" onclick="showTicketShop()">
        <img src="https://static.toss.im/2d-emojis/svg/u1F39F.svg" class="emoji-sm">
        <span id="ticketNum">5</span>
      </div>
    </div>
  </div>

  <div class="home-scroll-content">
    <!-- Profile Card -->
    <div class="profile-card">
      <div class="pc-content">
        <div class="pc-left">
          <div class="pc-label">나의 두뇌 나이</div>
          <div class="pc-value" id="rankName">100세</div>
          <div class="pc-rank-next" id="rankNext">다음 목표: 90세</div>
        </div>
        <div class="pc-right">
          <div class="pc-label">종합 순위</div>
          <div class="pc-value purple" id="overallPct">--%</div>
        </div>
      </div>
      <div class="xp-progress-container">
        <div class="xp-label">
          <span id="xpCur">0 XP</span>
          <span id="xpMax" class="sub">200 XP</span>
        </div>
        <div class="progress-track">
          <div class="progress-fill" id="xpFill" style="width:0%"></div>
        </div>
      </div>
    </div>

    <!-- Daily Workout -->
    <div id="dailyWorkout"></div>

    <!-- Point Progress Section -->
    <div class="point-section">
      <div class="section-header">
        <span class="section-title-sm">두뇌점수 모으기</span>
        <span class="point-val" id="pointProgress">0 / 100점</span>
      </div>
      <div class="progress-track-sm">
        <div id="pointBar" class="progress-fill-blue" style="width:0%"></div>
      </div>
      <p class="point-hint">100점이 모이면 100원으로 교환할 수 있어요</p>
      <button class="btn btn-primary btn-lg" id="exchangeBtn" onclick="exchangePoints()" disabled>100원 받기</button>
    </div>

    <!-- Challenges -->
    <div class="section-title">
      <img src="https://static.toss.im/2d-emojis/svg/u1F3AF.svg" class="emoji-md">
      오늘의 챌린지
      <span class="st-sub" id="missionCount">0/5</span>
    </div>
    <div id="missionList"></div>

    <!-- Game Grid -->
    <div class="section-title">
      <img src="https://static.toss.im/2d-emojis/svg/u1F3AE.svg" class="emoji-md">
      자유 훈련
    </div>
    <div id="gameGrid"></div>
  </div>
</div>

<!-- ===== LEADERBOARD SCREEN ===== -->
<div class="screen" id="leaderboardScreen">
  <div class="g-hdr">
    <button class="back" onclick="goHome()">←</button>
    <span class="g-title" id="lb-title">순위</span>
    <div style="width:24px"></div>
  </div>
  <div class="lb-container">
    <div class="lb-list" id="lb-list"></div>
  </div>
</div>

  <div id="pointExchangeVal" style="display:none"></div>

  <!-- (coins removed) -->
</div>

<!-- ===== GAME SCREENS ===== -->
<div class="screen" id="game-math">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">암산</span><div class="hearts" id="math-hearts"></div><span class="g-timer" id="math-timer">60s</span></div>
  <div class="g-body">
    <div class="g-score" id="math-score">0점</div><div class="combo-text" id="math-combo"></div>
    <div class="math-problem" id="math-problem"><span class="m-num" id="math-a">0</span><span class="m-op" id="math-op">+</span><span class="m-num" id="math-b">0</span><span class="m-eq">=</span><span class="m-ans" id="math-ans">?</span></div>
    <div class="numpad">
      <button class="nbtn" onclick="mathPress(1)">1</button><button class="nbtn" onclick="mathPress(2)">2</button><button class="nbtn" onclick="mathPress(3)">3</button><button class="nbtn" onclick="mathPress(4)">4</button>
      <button class="nbtn" onclick="mathPress(5)">5</button><button class="nbtn" onclick="mathPress(6)">6</button><button class="nbtn" onclick="mathPress(7)">7</button><button class="nbtn" onclick="mathPress(8)">8</button>
      <button class="nbtn" onclick="mathPress(9)">9</button><button class="nbtn" onclick="mathPress(0)">0</button><button class="nbtn del" onclick="mathDel()">⌫</button><button class="nbtn go" onclick="mathSubmit()">확인</button>
    </div>
  </div>
</div>

<div class="screen" id="game-memory">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">기억력 카드</span><span class="g-timer" id="mem-timer">60s</span></div>
  <div class="g-body"><div class="g-score" id="mem-score">0점</div><div class="mem-info" id="mem-info">같은 카드 쌍을 찾으세요!</div><div class="card-grid g4" id="mem-grid"></div></div>
</div>

<div class="screen" id="game-sequence">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">순서 기억</span><div class="hearts" id="seq-hearts"></div><span class="g-timer" id="seq-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="seq-score">0점</div><div class="seq-msg" id="seq-msg">순서를 기억하세요!</div><div class="seq-grid" id="seq-grid"></div></div>
</div>

<div class="screen" id="game-stroop">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">색깔</span><div class="hearts" id="stroop-hearts"></div><span class="g-timer" id="stroop-timer">60s</span></div>
  <div class="g-body"><div class="g-score" id="stroop-score">0점</div><div class="stroop-q">글자의 <b>색깔</b>을 맞추세요!</div><div class="stroop-word" id="stroop-word">빨강</div><div class="stroop-opts" id="stroop-opts"></div></div>
</div>

<div class="screen" id="game-reaction">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">반응속도</span><span class="g-timer" id="react-round">1/5</span></div>
  <div class="g-body"><div class="g-score" id="react-score">준비하세요</div><div class="react-area waiting" id="react-area" onclick="reactTap()"><div class="react-msg" id="react-msg">화면이 초록색이 되면<br>최대한 빨리 터치!</div></div></div>
</div>

<div class="screen" id="game-word">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">단어 찾기</span><span class="g-timer" id="word-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="word-score">0점</div><div id="word-cat" style="text-align:center;font-size:14px;font-weight:600;color:var(--p);padding:4px 0"></div><div class="word-list" id="word-list"></div><div class="word-board" id="word-board"></div><div style="text-align:center;font-size:12px;color:var(--sub);padding:4px">카테고리 힌트를 보고 숨은 단어를 찾으세요</div></div>
</div>

<div class="screen" id="game-pattern">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">패턴</span><div class="hearts" id="pat-hearts"></div><span class="g-timer" id="pat-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="pat-score">0점</div><div class="seq-msg" id="pat-msg">다음에 올 패턴은?</div><div class="pat-seq" id="pat-seq"></div><div class="pat-opts" id="pat-opts"></div></div>
</div>

<div class="screen" id="game-focus">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">집중력 탭</span><span class="g-timer" id="focus-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="focus-score">0점</div><div class="focus-legend"><span>○ 터치!</span><span>× 피하기</span><span>◎ 보너스</span></div><div class="focus-field" id="focus-field"></div></div>
</div>

<div class="screen" id="game-rotate">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">도형</span><div class="hearts" id="rot-hearts"></div><span class="g-timer" id="rot-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="rot-score">0점</div><div class="rotate-q" id="rot-q">회전된 같은 도형을 찾으세요</div><div class="rotate-original" id="rot-original"></div><div class="rotate-opts" id="rot-opts"></div></div>
</div>

<div class="screen" id="game-reverse">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">순서 뒤집기</span><div class="hearts" id="rev-hearts"></div><span class="g-timer" id="rev-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="rev-score">0점</div><div class="seq-msg" id="rev-msg">숫자를 거꾸로 입력하세요!</div><div class="rev-display" id="rev-display"></div><div class="rev-input" id="rev-input"></div>
    <div class="numpad" style="margin-top:auto">
      <button class="nbtn" onclick="revPress(1)">1</button><button class="nbtn" onclick="revPress(2)">2</button><button class="nbtn" onclick="revPress(3)">3</button><button class="nbtn" onclick="revPress(4)">4</button>
      <button class="nbtn" onclick="revPress(5)">5</button><button class="nbtn" onclick="revPress(6)">6</button><button class="nbtn" onclick="revPress(7)">7</button><button class="nbtn" onclick="revPress(8)">8</button>
      <button class="nbtn" onclick="revPress(9)">9</button><button class="nbtn" onclick="revPress(0)">0</button><button class="nbtn del" onclick="revDel()">⌫</button><button class="nbtn go" onclick="revSubmit()">확인</button>
    </div>
  </div>
</div>

<!-- ===== NEW GAMES ===== -->
<div class="screen" id="game-numtouch">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">넘버 터치</span><span class="g-timer" id="nt-timer">0.0s</span></div>
  <div class="g-body"><div class="g-score" id="nt-score">0점</div><div class="seq-msg" id="nt-msg">1부터 순서대로 터치!</div><div class="nt-grid" id="nt-grid"></div></div>
</div>

<div class="screen" id="game-rhythm">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">리듬 기억</span><div class="hearts" id="rhy-hearts"></div><span class="g-timer" id="rhy-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="rhy-score">0점</div><div class="seq-msg" id="rhy-msg">패턴을 기억하세요!</div><div class="rhy-pads" id="rhy-pads"><div class="rhy-pad" data-p="0" onclick="rhyTap(0)" style="--pc:#F04452"></div><div class="rhy-pad" data-p="1" onclick="rhyTap(1)" style="--pc:#3182F6"></div><div class="rhy-pad" data-p="2" onclick="rhyTap(2)" style="--pc:#1FC58E"></div><div class="rhy-pad" data-p="3" onclick="rhyTap(3)" style="--pc:#F59E0B"></div></div></div>
</div>

<div class="screen" id="game-rps">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">두뇌 가위바위보</span><div class="hearts" id="rps-hearts"></div><span class="g-timer" id="rps-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="rps-score">0점</div><div class="rps-q" id="rps-q">이기는 것을 내세요!</div><div class="rps-enemy" id="rps-enemy">바위</div><div class="rps-opts" id="rps-opts"><button class="rps-btn" onclick="rpsPick(0)">바위</button><button class="rps-btn" onclick="rpsPick(1)">보</button><button class="rps-btn" onclick="rpsPick(2)">가위</button></div></div>
</div>

<div class="screen" id="game-oddone">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">다른 글자 찾기</span><div class="hearts" id="odd-hearts"></div><span class="g-timer" id="odd-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="odd-score">0점</div><div class="seq-msg">다른 글자를 찾으세요!</div><div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="odd-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div><div class="odd-grid" id="odd-grid"></div></div>
</div>

<div class="screen" id="game-compare">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">크다작다</span><div class="hearts" id="cmp-hearts"></div><span class="g-timer" id="cmp-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="cmp-score">0점</div><div class="cmp-q" id="cmp-q" style="text-align:center;font-size:18px;font-weight:800;color:var(--p);padding:8px"></div><div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="cmp-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div><div class="cmp-nums"><span class="cmp-n" id="cmp-a" onclick="cmpPick('left')" style="cursor:pointer">0</span><span class="cmp-vs">vs</span><span class="cmp-n" id="cmp-b" onclick="cmpPick('right')" style="cursor:pointer">0</span></div><div style="text-align:center;font-size:12px;color:var(--sub);padding:4px">숫자를 터치하세요</div></div>
</div>

<div class="screen" id="game-bulb">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">전구 기억</span><div class="hearts" id="bulb-hearts"></div><span class="g-timer" id="bulb-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="bulb-score">0점</div><div class="seq-msg" id="bulb-msg">전구 순서를 기억하세요!</div><div class="bulb-grid" id="bulb-grid"></div></div>
</div>

<div class="screen" id="game-colormix">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">색깔 조합</span><div class="hearts" id="cmx-hearts"></div><span class="g-timer" id="cmx-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="cmx-score">0점</div><div class="cmx-q" id="cmx-q"></div><div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="cmx-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div><div class="cmx-opts" id="cmx-opts"></div></div>
</div>

<div class="screen" id="game-wordcomp">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">단어 완성</span><div class="hearts" id="wc-hearts"></div><span class="g-timer" id="wc-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="wc-score">0점</div><div class="wc-word" id="wc-word"></div><div class="wc-hint" id="wc-hint"></div><div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="wc-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div><div class="wc-opts" id="wc-opts"></div></div>
</div>

<div class="screen" id="game-timing">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">타이밍</span><span class="g-timer" id="tm-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="tm-score">0점</div><div class="seq-msg" id="tm-msg">목표에 맞춰 터치!</div><div class="tm-bar"><div class="tm-target" id="tm-target"></div><div class="tm-cursor" id="tm-cursor"></div></div><button class="btn btn-primary" id="tm-btn" onclick="tmStop()" style="margin-top:20px">STOP!</button></div>
</div>

<div class="screen" id="game-matchpair">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">짝 맞추기</span><span class="g-timer" id="mp-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="mp-score">0점</div><div class="seq-msg">한자어와 뜻을 연결하세요</div><div class="mp-cols" id="mp-cols"><div class="mp-col" id="mp-left"></div><div class="mp-col" id="mp-right"></div></div></div>
</div>

<!-- ===== NINTENDO-STYLE GAMES ===== -->
<div class="screen" id="game-headcount">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">인원 세기</span><span class="g-timer" id="hc-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="hc-score">0점</div>
    <div class="hc-stage" id="hc-stage">
      <svg class="hc-bldg" viewBox="0 0 140 150" fill="none">
        <!-- Building body -->
        <rect x="20" y="40" width="100" height="110" rx="6" fill="#fff" stroke="#E5E8EB" stroke-width="2"/>
        <!-- Roof -->
        <path d="M10 44L70 8L130 44" fill="#3182F6" stroke="#1B64DA" stroke-width="2" stroke-linejoin="round"/>
        <!-- Windows row 1 -->
        <rect x="34" y="56" width="20" height="18" rx="3" fill="#EBF3FE" stroke="#B4D5FE" stroke-width="1.5"/>
        <rect x="86" y="56" width="20" height="18" rx="3" fill="#EBF3FE" stroke="#B4D5FE" stroke-width="1.5"/>
        <!-- Windows row 2 -->
        <rect x="34" y="86" width="20" height="18" rx="3" fill="#EBF3FE" stroke="#B4D5FE" stroke-width="1.5"/>
        <rect x="86" y="86" width="20" height="18" rx="3" fill="#EBF3FE" stroke="#B4D5FE" stroke-width="1.5"/>
        <!-- Door -->
        <rect x="55" y="112" width="30" height="38" rx="4" fill="#3182F6" opacity=".15" stroke="#3182F6" stroke-width="2"/>
        <circle cx="79" cy="132" r="2.5" fill="#3182F6"/>
        <!-- Chimney -->
        <rect x="95" y="16" width="14" height="28" rx="2" fill="#8B95A1" opacity=".3"/>
      </svg>
      <div class="hc-counter" id="hc-counter"></div>
    </div>
    <div class="hc-log" id="hc-log"></div>
    <div class="seq-msg" id="hc-msg">집 안에 몇 명?</div>
    <div class="hc-opts" id="hc-opts"></div>
  </div>
</div>

<div class="screen" id="game-pyramid">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">피라미드 연산</span><div class="hearts" id="pyr-hearts"></div><span class="g-timer" id="pyr-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="pyr-score">0점</div>
    <div class="seq-msg">인접한 수의 합 = 윗칸</div>
    <div class="pyr-grid" id="pyr-grid"></div>
  </div>
</div>

<div class="screen" id="game-maxnum">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">수 찾기</span><div class="hearts" id="mn-hearts"></div><span class="g-timer" id="mx-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="mx-score">0점</div>
    <div class="seq-msg" id="mx-msg">가장 큰 수를 터치!</div>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="mn-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div class="mx-grid" id="mx-grid"></div>
  </div>
</div>

<div class="screen" id="game-signfind">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">부호 찾기</span><div class="hearts" id="sf-hearts"></div><span class="g-timer" id="sf-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="sf-score">0점</div>
    <div class="sf-eq" id="sf-eq"></div>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="sf-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div class="sf-opts" id="sf-opts"></div>
  </div>
</div>

<div class="screen" id="game-coincount">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">동전 세기</span><div class="hearts" id="cc-hearts"></div><span class="g-timer" id="cc-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="cc-score">0점</div>
    <div class="seq-msg">동전 합계는?</div>
    <div class="cc-coins" id="cc-coins"></div>
    <div class="cc-opts" id="cc-opts"></div>
  </div>
</div>

<div class="screen" id="game-clock">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">시계 읽기</span><div class="hearts" id="clk-hearts"></div><span class="g-timer" id="clk-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="clk-score">0점</div>
    <canvas id="clk-canvas" width="240" height="240" style="display:block;margin:16px auto"></canvas>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="clk-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div class="seq-msg">지금 몇 시 몇 분?</div>
    <div class="clk-opts" id="clk-opts"></div>
  </div>
</div>

<div class="screen" id="game-wordmem">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">단어 암기</span><div class="hearts" id="wm-hearts"></div><span class="g-timer" id="wm-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="wm-score">0점</div>
    <div class="seq-msg" id="wm-msg">단어를 기억하세요!</div>
    <div class="wm-display" id="wm-display"></div>
    <div class="wm-opts" id="wm-opts"></div>
  </div>
</div>

<div class="screen" id="game-blockcount">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">블록 세기</span><div class="hearts" id="bc-hearts"></div><span class="g-timer" id="bc-round">1/10</span></div>
  <div class="g-body"><div class="g-score" id="bc-score">0점</div>
    <canvas id="bc-canvas" width="280" height="240" style="display:block;margin:16px auto"></canvas>
    <div class="seq-msg">블록이 몇 개?</div>
    <div class="bc-opts" id="bc-opts"></div>
  </div>
</div>

<!-- 29. FLANKER -->
<div class="screen" id="game-flanker">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">방향 맞추기</span><div class="hearts" id="fk-hearts"></div><span class="g-timer" id="fk-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="fk-score">0점</div>
    <div class="seq-msg" id="fk-msg">가운데 큰 화살표의 방향은?</div>
    <div id="fk-display" style="text-align:center;padding:20px 0;user-select:none;display:flex;align-items:center;justify-content:center;gap:4px"></div>
    <div id="fk-btns" style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;padding:16px;max-width:280px;margin:0 auto">
      <div></div><button class="btn btn-weak" onclick="fkPick('up')" style="font-size:28px;padding:14px;width:auto">↑</button><div></div>
      <button class="btn btn-weak" onclick="fkPick('left')" style="font-size:28px;padding:14px;width:auto">←</button><div></div><button class="btn btn-weak" onclick="fkPick('right')" style="font-size:28px;padding:14px;width:auto">→</button>
      <div></div><button class="btn btn-weak" onclick="fkPick('down')" style="font-size:28px;padding:14px;width:auto">↓</button><div></div>
    </div>
  </div>
</div>
<!-- 30. MEMGRID -->
<div class="screen" id="game-memgrid">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">격자 기억</span><div class="hearts" id="mg-hearts"></div><span class="g-timer" id="mg-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="mg-score">0점</div>
    <div class="seq-msg" id="mg-msg">칸을 기억하세요!</div>
    <div id="mg-grid" style="display:grid;gap:6px;margin:16px auto;width:fit-content"></div>
  </div>
</div>
<!-- 31. NBACK -->
<div class="screen" id="game-nback">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">같거나 다르거나</span><span class="g-timer" id="nb-round">1/20</span></div>
  <div class="g-body"><div class="g-score" id="nb-score">0점</div>
    <div class="seq-msg" id="nb-msg">이전 카드와 같으면 O, 다르면 X</div>
    <div id="nb-card" style="width:120px;height:120px;margin:16px auto;border-radius:var(--r16);display:flex;align-items:center;justify-content:center;font-size:48px;font-weight:900;background:var(--card);box-shadow:var(--shadow);border:3px solid var(--border)"></div>
    <div style="display:flex;gap:12px;justify-content:center;padding:16px"><button class="btn btn-primary" onclick="nbPick(true)" style="width:120px;font-size:22px;padding:14px">같다 O</button><button class="btn btn-danger-weak" onclick="nbPick(false)" style="width:120px;font-size:22px;padding:14px">다르다 X</button></div>
  </div>
</div>
<!-- 32. SCRAMBLE -->
<div class="screen" id="game-scramble">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">글자 섞기</span><div class="hearts" id="sc-hearts"></div><span class="g-timer" id="sc-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="sc-score">0점</div>
    <div class="seq-msg">섞인 글자를 올바른 순서로!</div>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="sc-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div id="sc-scrambled" style="display:flex;gap:8px;justify-content:center;padding:16px;font-size:32px;font-weight:800"></div>
    <div id="sc-opts" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;padding:0 16px"></div>
  </div>
</div>
<!-- 33. SERIAL -->
<div class="screen" id="game-serial">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">연속 빼기</span><span class="g-timer" id="sr-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="sr-score">0점</div>
    <div id="sr-q" style="text-align:center;font-size:16px;font-weight:700;color:var(--p);padding:8px"></div>
    <div id="sr-num" style="text-align:center;font-size:52px;font-weight:900;padding:16px 0"></div>
    <div id="sr-opts" style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:0 16px"></div>
  </div>
</div>
<!-- 34. LEFTRIGHT -->
<div class="screen" id="game-leftright">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">좌우 판단</span><div class="hearts" id="lr-hearts"></div><span class="g-timer" id="lr-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="lr-score">0점</div>
    <div id="lr-hand" style="font-size:100px;text-align:center;padding:16px 0;user-select:none"></div>
    <div class="seq-msg" id="lr-msg">이 손은?</div>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="lr-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div style="display:flex;gap:12px;justify-content:center;padding:16px"><button class="btn btn-weak" onclick="lrPick('left')" style="width:120px;font-size:18px;padding:14px">왼손</button><button class="btn btn-weak" onclick="lrPick('right')" style="width:120px;font-size:18px;padding:14px">오른손</button></div>
  </div>
</div>
<!-- 35. CALCCOMP -->
<div class="screen" id="game-calccomp">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">계산 비교</span><div class="hearts" id="cc2-hearts"></div><span class="g-timer" id="cc2-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="cc2-score">0점</div>
    <div class="seq-msg">더 큰 쪽을 터치!</div>
    <div style="width:80%;max-width:240px;margin:0 auto 8px;height:4px;border-radius:2px;background:var(--border);overflow:hidden"><div id="cc2-qbar" style="height:100%;background:var(--p);border-radius:2px;width:100%"></div></div>
    <div style="display:flex;gap:12px;justify-content:center;align-items:center;padding:20px 16px">
      <div id="cc2-a" onclick="cc2Pick('left')" style="flex:1;padding:24px 8px;text-align:center;font-size:22px;font-weight:800;background:var(--card);border-radius:var(--r16);box-shadow:var(--shadow);cursor:pointer;border:2px solid var(--border)"></div>
      <span style="font-size:18px;font-weight:700;color:var(--sub)">VS</span>
      <div id="cc2-b" onclick="cc2Pick('right')" style="flex:1;padding:24px 8px;text-align:center;font-size:22px;font-weight:800;background:var(--card);border-radius:var(--r16);box-shadow:var(--shadow);cursor:pointer;border:2px solid var(--border)"></div>
    </div>
  </div>
</div>
<!-- 36. FLASH -->
<div class="screen" id="game-flash">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">순간 포착</span><div class="hearts" id="fl-hearts"></div><span class="g-timer" id="fl-level">Lv.1</span></div>
  <div class="g-body"><div class="g-score" id="fl-score">0점</div>
    <div class="seq-msg" id="fl-msg">숫자를 기억하세요!</div>
    <div id="fl-display" style="text-align:center;font-size:56px;font-weight:900;padding:24px 16px;letter-spacing:6px;word-break:break-all;overflow-wrap:break-word"></div>
    <div id="fl-input" style="text-align:center;padding:8px"></div>
  </div>
</div>
<!-- 37. SORT -->
<div class="screen" id="game-sort">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">카테고리 분류</span><span class="g-timer" id="st-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="st-score">0점</div>
    <div style="display:flex;gap:8px;justify-content:center;padding:8px 16px"><div id="st-cat1" style="flex:1;padding:10px;text-align:center;font-size:14px;font-weight:700;border-radius:var(--r12);background:var(--p);color:#fff"></div><div id="st-cat2" style="flex:1;padding:10px;text-align:center;font-size:14px;font-weight:700;border-radius:var(--r12);background:#F43F5E;color:#fff"></div></div>
    <div id="st-word" style="text-align:center;font-size:36px;font-weight:900;padding:24px 0"></div>
    <div style="display:flex;gap:12px;justify-content:center;padding:16px"><button class="btn btn-weak" id="st-btn1" onclick="stPick(0)" style="width:120px;padding:14px;font-size:16px"></button><button class="btn btn-danger-weak" id="st-btn2" onclick="stPick(1)" style="width:120px;padding:14px;font-size:16px"></button></div>
  </div>
</div>
<!-- 38. MIRROR -->
<div class="screen" id="game-mirror">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">거울 문자</span><div class="hearts" id="mr-hearts"></div><span class="g-timer" id="mr-timer">30s</span></div>
  <div class="g-body"><div class="g-score" id="mr-score">0점</div>
    <div class="seq-msg">뒤집힌 글자를 읽으세요!</div>
    <div id="mr-char" style="text-align:center;font-size:80px;font-weight:900;padding:20px 0;transform:scaleX(-1);user-select:none"></div>
    <div id="mr-opts" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;padding:0 16px"></div>
  </div>
</div>

<!-- ===== TICKET SHOP ===== -->
<div class="screen" id="ticketShop">
  <div class="g-hdr"><button class="back" onclick="goHome()">←</button><span class="g-title">티켓 충전</span></div>
  <div class="g-body" style="padding:24px 20px;text-align:center">
    <div style="margin:20px 0 16px"><img src="https://static.toss.im/2d-emojis/svg/u1F39F.svg" style="width:72px;height:72px"></div>
    <div style="font-size:14px;color:var(--sub);margin-bottom:4px">보유 티켓</div>
    <div id="ts-count" style="font-size:40px;font-weight:800;color:var(--p);margin-bottom:24px">0장</div>

    <button class="btn btn-primary" onclick="ticketAdRefill()" id="ts-ad-btn" style="width:100%;font-size:16px;padding:16px;margin-bottom:20px">
      <span style="display:flex;align-items:center;justify-content:center;gap:8px"><img src="https://static.toss.im/2d-emojis/svg/u1F3AC.svg" style="width:20px;height:20px">광고 보고 3~5장 받기</span>
    </button>

    <div style="background:var(--card);border-radius:var(--r16);padding:16px 20px;margin-bottom:12px;box-shadow:var(--shadow);display:flex;align-items:center;gap:12px">
      <img src="https://static.toss.im/2d-emojis/svg/u23F0.svg" style="width:32px;height:32px;flex-shrink:0">
      <div style="text-align:left"><div style="font-size:15px;font-weight:700">매일 오전 9시 자동 충전</div><div style="font-size:12px;color:var(--sub);margin-top:2px">5장 미만이면 5장으로 채워져요</div></div>
    </div>
    <div style="font-size:12px;color:var(--sub)">최대 99장까지 보유 가능</div>

    <!-- 배너 광고 영역 -->
    <div id="ts-banner" style="margin-top:24px;min-height:50px;background:var(--border);border-radius:var(--r12);display:flex;align-items:center;justify-content:center;color:var(--sub);font-size:12px">광고 영역</div>
  </div>
</div>

<!-- ===== RESULT ===== -->
<!-- Ticket Modal -->
<div class="overlay" id="ticketModal" style="display:none;z-index:1001">
  <div style="background:var(--card);border-radius:var(--r20);padding:28px 24px;margin:auto;max-width:320px;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,.15)">
    <div style="margin-bottom:12px"><img src="https://static.toss.im/2d-emojis/svg/u1F39F.svg" style="width:48px;height:48px"></div>
    <div style="font-size:18px;font-weight:800;margin-bottom:6px">티켓을 모두 사용했어요</div>
    <div style="font-size:14px;color:var(--sub);margin-bottom:6px">오전 9시에 티켓이 충전됩니다</div>
    <div style="font-size:13px;color:var(--sub);margin-bottom:20px">광고를 보고 바로 시작할 수도 있어요!</div>
    <button class="btn btn-primary" id="ticketAdBtn" style="width:100%;margin-bottom:10px;font-size:16px;padding:14px">잠깐 광고보고 시작하기</button>
    <button class="btn btn-home" onclick="closeTicketModal()" style="width:100%;font-size:14px;padding:12px">돌아가기</button>
  </div>
</div>

<div class="overlay" id="overlay">
  <div class="result-sheet">
    <div class="result-card">
      <h3 id="r-title">훈련 완료!</h3>
      <div class="r-score" id="r-score">0</div>
      <div class="r-cat" id="r-cat">최고기록 도전 중</div>
      <div class="r-badges">
        <div class="r-badge r-badge-xp" id="r-xp">+0 XP</div>
        <div class="r-badge r-badge-pt" id="r-pt">+0 두뇌점수</div>
      </div>
      <div class="r-stats" id="r-stats"></div>
    </div>

    <!-- Science Tip -->
    <div id="r-science" style="background:var(--card);border-radius:20px;padding:20px;margin-bottom:16px;text-align:left;box-shadow:var(--shadow-sm)">
      <div style="font-size:14px;font-weight:800;color:var(--p);margin-bottom:6px" id="r-sci-title">두뇌 상식</div>
      <div style="font-size:13px;color:var(--sub-text);line-height:1.6" id="r-sci-desc"></div>
    </div>

    <button class="btn btn-primary btn-lg" id="r-main-btn" onclick="replayGame()" style="margin-bottom:12px">광고보고 한 번 더 도전하기</button>

    <div class="btn-group">
      <button class="btn btn-weak btn-md" onclick="shareScore()">공유하기</button>
      <button class="btn btn-weak btn-md" onclick="AIT.openLeaderboard()">순위보기</button>
    </div>

    <button class="btn btn-home btn-lg" onclick="goHomeFromResult()">홈으로 돌아가기</button>
  </div>
</div>

<!-- ===== WORKOUT TRANSITION ===== -->
<div class="wk-transition" id="wkTransition">
  <div class="wkt-progress" id="wkt-progress">1 / 3</div>
  <div class="wkt-next" id="wkt-icon">🧮</div>
  <div class="wkt-name" id="wkt-name">암산 챌린지</div>
  <div class="wkt-desc" id="wkt-desc">준비되셨나요?</div>
  <button class="btn btn-primary" onclick="wkStartNext()" style="width:200px;margin-top:12px">시작하기</button>
</div>

<!-- ===== HEART REFILL ===== -->
<!-- Time Extend Overlay -->
<div class="heart-overlay" id="timeExtendOverlay">
  <div class="heart-card">
    <div style="font-size:18px;font-weight:800;line-height:1.5;margin-bottom:20px">시간 종료!<br>광고를 보고 5초 더 도전하세요</div>
    <div style="margin-bottom:24px"><img src="https://static.toss.im/2d-emojis/svg/u23F0.svg" style="width:72px;height:72px"></div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-home" onclick="timeExtendQuit()" style="flex:1;margin:0">그만두기</button>
      <button class="btn btn-primary" onclick="timeExtendAccept()" style="flex:1;margin:0">5초 더 하기</button>
    </div>
  </div>
</div>

<div class="heart-overlay" id="heartOverlay">
  <div class="heart-card">
    <div style="font-size:18px;font-weight:800;line-height:1.5;margin-bottom:20px">잠깐 광고를 보면<br>하트를 하나 더 드려요</div>
    <div style="margin-bottom:24px"><img src="https://static.toss.im/2d-emojis/svg/u2764.svg" style="width:72px;height:72px"></div>
    <div style="display:flex;gap:8px">
      <button class="btn btn-home" onclick="heartQuit()" style="flex:1;margin:0">그만두기</button>
      <button class="btn btn-primary" onclick="refillHearts()" style="flex:1;margin:0">계속하기</button>
    </div>
  </div>
</div>

<!-- ===== LEVEL UP ===== -->
<div class="levelup-overlay" id="levelupOverlay">
  <div class="levelup-card">
    <div class="lu-badge" id="lu-badge" style="font-size:48px"></div>
    <div class="lu-title" id="lu-title">실버 승급!</div>
    <div class="lu-desc" id="lu-desc">두뇌 훈련을 꾸준히 하고 계시네요!</div>
    <div class="lu-unlock hide" id="lu-unlock"></div>
    <button class="btn btn-primary" onclick="closeLevelUp()">확인</button>
  </div>
</div>

</div>

<script src="src/core/ait.js?v=112"></script>
<script src="src/core/config.js?v=112"></script>
<script src="src/core/utils.js?v=112"></script>
<script src="src/core/workout.js?v=112"></script>
<script src="src/core/ticket.js?v=112"></script>
<script src="src/ui/game_common.js?v=112"></script>
<script src="src/ui/home.js?v=112"></script>
<script src="src/ui/result.js?v=112"></script>
<script src="src/ui/leaderboard.js?v=112"></script>
<script src="src/games/math.js?v=112"></script>
<script src="src/games/memory.js?v=112"></script>
<script src="src/games/sequence.js?v=112"></script>
<script src="src/games/stroop.js?v=112"></script>
<script src="src/games/reaction.js?v=112"></script>
<script src="src/games/word.js?v=112"></script>
<script src="src/games/pattern.js?v=112"></script>
<script src="src/games/focus.js?v=112"></script>
<script src="src/games/rotate.js?v=112"></script>
<script src="src/games/reverse.js?v=112"></script>
<script src="src/games/numtouch.js?v=112"></script>
<script src="src/games/rhythm.js?v=112"></script>
<script src="src/games/rps.js?v=112"></script>
<script src="src/games/oddone.js?v=112"></script>
<script src="src/games/compare.js?v=112"></script>
<script src="src/games/bulb.js?v=112"></script>
<script src="src/games/colormix.js?v=112"></script>
<script src="src/games/wordcomp.js?v=112"></script>
<script src="src/games/timing.js?v=112"></script>
<script src="src/games/matchpair.js?v=112"></script>
<script src="src/games/headcount.js?v=112"></script>
<script src="src/games/pyramid.js?v=112"></script>
<script src="src/games/maxnum.js?v=112"></script>
<script src="src/games/signfind.js?v=112"></script>
<script src="src/games/coincount.js?v=112"></script>
<script src="src/games/clock.js?v=112"></script>
<script src="src/games/wordmem.js?v=112"></script>
<script src="src/games/blockcount.js?v=112"></script>
<script src="src/games/flanker.js?v=112"></script>
<script src="src/games/memgrid.js?v=112"></script>
<script src="src/games/nback.js?v=112"></script>
<script src="src/games/scramble.js?v=112"></script>
<script src="src/games/serial.js?v=112"></script>
<script src="src/games/leftright.js?v=112"></script>
<script src="src/games/calccomp.js?v=112"></script>
<script src="src/games/flash.js?v=112"></script>
<script src="src/games/sort.js?v=112"></script>
<script src="src/games/mirror.js?v=112"></script>

<script>
window.addEventListener('DOMContentLoaded', () => {
  renderHome();
});
</script>
</body>
</html>
